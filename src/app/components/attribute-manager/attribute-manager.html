<div class="attribute-manager">
  <div class="header">
    <h2>Distribute Attribute Points</h2>
    <div class="points-display">
      <span class="points-remaining" [class.warning]="remainingPoints === 0">
        Points Remaining: <strong>{{ remainingPoints }}</strong> / {{ totalPoints }}
      </span>
      <button class="reset-btn" (click)="resetAttributes()">Reset All</button>
    </div>
  </div>

  <div class="attributes-list">
    <app-attribute-allocator
      *ngFor="let attr of attributes"
      [attributeName]="attr.name"
      [currentValue]="attr.currentValue"
      [minValue]="MIN_ATTRIBUTE_VALUE"
      [maxValue]="MAX_ATTRIBUTE_VALUE"
      [pointsRemaining]="remainingPoints"
      (valueChanged)="onAttributeChanged($event)">
    </app-attribute-allocator>
  </div>

  <div class="info-panel" *ngIf="character">
    <h3>Derived Attributes Preview</h3>
    <div class="derived-stats">
      <div class="stat">
        <label>Health:</label>
        <span>{{ character.resources.health.max }}</span>
      </div>
      <div class="stat">
        <label>Focus:</label>
        <span>{{ character.resources.focus.max }}</span>
      </div>
      <div class="stat">
        <label>Movement Rate:</label>
        <span>{{ movementSpeed }}</span>
      </div>
      <div class="stat">
        <label>Recovery Die:</label>
        <span>{{ recoveryDie }}</span>
      </div>
    </div>
  </div>

  <div class="actions">
    <button 
      class="proceed-btn" 
      [disabled]="!canProceed"
      [class.complete]="isComplete">
      {{ isComplete ? 'Continue' : 'Allocate All Points to Continue' }}
    </button>
  </div>
</div>
